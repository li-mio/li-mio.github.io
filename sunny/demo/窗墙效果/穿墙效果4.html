<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>穿墙</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style>
    *{padding:0;margin:0;list-style:none;}
    #ul1 li{width:200px;height:200px;background:#ccc;overflow:hidden;position:relative;float:left;margin:10px;}
    #ul1 li span{width:200px;height:200px;background:red;opacity:0.3;position:absolute;left:-200px;top:0;}
</style>
<script src="move.js"></script>
<script>
function through(obj){
      function a2d(n){
            return n*180/Math.PI;
        }
        function d2a(n){
            return n*math.PI/180;
        }
        function hoverDir(obj,ev){
            var x=obj.offsetLeft+obj.offsetWidth/2-ev.clientX;
            var y=obj.offsetTop+obj.offsetHeight/2-ev.clientY;
            return Math.round((a2d(Math.atan2(y,x))+180)/90)%4;
        }
        obj.onmouseover=function(ev){
            var oS=obj.children[0];
            var oEvent=ev||event;
            var oFrom=oEvent.fromElement||oEvent.relatedTarger;
            if(obj.contains(oFrom)){
                return;
            }
            var dir=hoverDir(obj,oEvent);
            switch(dir){
                case 0:
                    oS.style.left='200px';
                    oS.style.top='0';
                    break;
                case 1:
                    oS.style.left='0';
                    oS.style.top='200px';
                    break;
                case 2:
                    oS.style.left='-200px';
                    oS.style.top='0';
                    break;

                case 3:
                    oS.style.left='0';
                    oS.style.top='-200px';
                    break;
              
            }
            move(oS,{left:0,top:0});
        };
        obj.onmouseout=function(ev){
            var oS=obj.children[0];
            var oEvent=ev||event;
            var oTo=oEvent.toElement||oEvent.relatedTarget;
            if(obj.contains(oTo)){
                return;
            }
            var dir=hoverDir(obj,oEvent);
            switch(dir){
                case 0:
                    move(oS,{left:200,top:0});
                    break;
                case 1:
                    move(oS,{left:0,top:200});
                    break;
                 case 2:
                    move(oS,{left:-200,top:0});
                    break;
                 case 3:
                    move(oS,{left:0,top:-200});
                    break;
            }
        };
}
    window.onload=function(){
        var oUl=document.getElementById('ul1');
        var aLi=oUl.children;

        for(var i=0;i<aLi.length;i++){
            through(aLi[i]);
        }
      
    };
</script>
</head>
<body>
    <div id="div1">
        <ul id="ul1">
            <li><span>作品</span></li>
            <li><span>作品1</span></li>
            <li><span>fslj</span></li>
            <li><span>shsg</span></li>
            <li><span>sgs</span></li>
            <li><span>sgtj</span></li>
            <li><span>twh</span></li>
            <li><span>hwwj</span></li>
            <li><span>mhte</span></li>
            <li><span>yjer</span></li>
            <li><span>ejyw</span></li>
            <li><span>wjyw</span></li>
            <li><span>作品</span></li>
            <li><span>作品1</span></li>
            <li><span>fslj</span></li>
            <li><span>shsg</span></li>
            <li><span>sgs</span></li>
            <li><span>sgtj</span></li>
            <li><span>twh</span></li>
            <li><span>hwwj</span></li>
            <li><span>mhte</span></li>
            <li><span>yjer</span></li>
            <li><span>ejyw</span></li>
            <li><span>wjyw</span></li>
            <li><span>作品</span></li>
            <li><span>作品1</span></li>
            <li><span>fslj</span></li>
            <li><span>shsg</span></li>
            <li><span>sgs</span></li>
            <li><span>sgtj</span></li>
            <li><span>twh</span></li>
            <li><span>hwwj</span></li>
            <li><span>mhte</span></li>
            <li><span>yjer</span></li>
            <li><span>ejyw</span></li>
            <li><span>wjyw</span></li>
        </ul>
    </div>
</body>
</html>